<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Skills"><title>顺序单链表插入新节点的一种方法 | Frank</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">顺序单链表插入新节点的一种方法</h1><a id="logo" href="/.">Frank</a><p class="description">去探索更大的世界</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Skills</i></a><a href="http://blog.frankge.me"><i class="fa fa-pencil"> Blog</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="http://frankge.me/the-timeline-of-my-site/"><i class="fa fa-history"> Timeline</i></a><a href="http://frankge.me/recommended-blogs/"><i class="fa fa-star-o"> Recommended</i></a><a href="http://frankge.me"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> Rss</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">顺序单链表插入新节点的一种方法</h1><div class="post-meta">Aug 18, 2016<span> | </span><span class="category"><a href="/categories/编程学习/">编程学习</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="a-smart-way-to-insert-a-new-node-in-sorted-singly-linked-list/" href="/a-smart-way-to-insert-a-new-node-in-sorted-singly-linked-list/#comments" class="ds-thread-count"></a><div class="post-content"><p style="text-align: justify;">在学习链表的时候我们都接触过单链表插入新结点的问题。其中有一类就是在顺序链表中插入新节点，并保持链表的递增或者递减性质。</p>

<p style="text-align: justify;">最近看《C和指针》一书中提到了一种方法，我个人感觉不错，并且思想非常好。</p>

<p style="text-align: justify;">这是最常见的思维：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sll_node.h  </span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> Node  </div><div class="line">&#123;  </div><div class="line">    <span class="keyword">int</span> value;  </div><div class="line">    Node *next;  </div><div class="line">&#125; Node;</div></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"sll_node.h"</span>  </span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span>  </span></div><div class="line">  </div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> TRUE    1  </span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> FALSE   0  </span></div><div class="line">  </div><div class="line"><span class="comment">// insertNode:把newValue的值插入到递增排序的链表中，正确返回TRUE，错误返回FALSE  </span></div><div class="line"><span class="comment">// rootp是链表的头指针。  </span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">insertNode</span><span class="params">(Node **rootp, <span class="keyword">int</span> newValue)</span>  </span></div><div class="line">&#123;  </div><div class="line">    Node *newNode; <span class="comment">// 新节点的指针  </span></div><div class="line">    Node *previous; <span class="comment">// 当前指针的前一个指针  </span></div><div class="line">    Node *current; <span class="comment">// 当前指针  </span></div><div class="line">  </div><div class="line">    current = *rootp; <span class="comment">// 初始化  </span></div><div class="line">    previous = <span class="literal">NULL</span>;  </div><div class="line">  </div><div class="line">    <span class="comment">// 查找插入的位置  </span></div><div class="line">    <span class="keyword">while</span> (current != <span class="literal">NULL</span> &amp;&amp; current-&gt;value &lt; newValue)</div><div class="line">    &#123;</div><div class="line">        previous = current;</div><div class="line">        current = current-&gt;next;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="comment">// 给新节点分配空间  </span></div><div class="line">    newNode = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));  </div><div class="line">    <span class="keyword">if</span> (newNode == <span class="literal">NULL</span>)  </div><div class="line">        <span class="keyword">return</span> FALSE;  </div><div class="line">    newNode-&gt;value = newValue;  </div><div class="line">  </div><div class="line">    <span class="comment">// 更改新节点的前驱和后继节点  </span></div><div class="line">    newNode-&gt;next = current;  </div><div class="line">    <span class="keyword">if</span> (previous == <span class="literal">NULL</span>) <span class="comment">// 此时插入节点的为链表中第一个节点，修改头指针  </span></div><div class="line">        *rootp = newNode;  </div><div class="line">    <span class="keyword">else</span>  </div><div class="line">        previous-&gt;next = newNode;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> TRUE;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">我以前编写的时候也会用这样的方法：一个当前指针和指向当前指针之前的指针，这样需要讨论原链表是否为空。书中提到了一种抽象，每次插入新的节点，都是改变一个指向这个新节点的指针以及指向下一个节点，这样可以省略讨论插入的节点是否为第一个节点的步骤。代码如下：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"sll_node.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span>	FALSE	0</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> TRUE	1</span></div><div class="line"></div><div class="line"><span class="comment">// insertNode2:把newValue的值插入到递增排序的链表中，正确返回TRUE，错误返回FALSE</span></div><div class="line"><span class="comment">// nextp是指向当前节点的指针，最初是头指针</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">insertNode2</span><span class="params">(Node **nextp, <span class="keyword">int</span> newValue)</span></span></div><div class="line">&#123;</div><div class="line">	Node *newNode; <span class="comment">// 新节点指针</span></div><div class="line">	Node *current; <span class="comment">// 当前节点指针</span></div><div class="line"></div><div class="line">	current = *nextp; <span class="comment">// 最初当前节点为nextp指针指向的节点</span></div><div class="line">	<span class="comment">// 查找新插入节点的位置</span></div><div class="line">	<span class="keyword">while</span> (current != <span class="literal">NULL</span> &amp;&amp; current-&gt;value &lt; newValue)</div><div class="line">	&#123;</div><div class="line">		nextp = &amp;current-&gt;next;</div><div class="line">		current = current-&gt;next;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 为新节点分配内存</span></div><div class="line">	newNode = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</div><div class="line">	<span class="keyword">if</span> (newNode == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> FALSE;</div><div class="line">	newNode-&gt;value = newValue;</div><div class="line"></div><div class="line">	<span class="comment">// 统一了插入的步骤。即：每次插入，都是前一个指针指向新节点，新节点指向下一个节点</span></div><div class="line">	*nextp = newNode;</div><div class="line">	newNode-&gt;next = current;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> TRUE;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>main函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"sll_node.h"</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">insertNode</span><span class="params">(Node **rootp, <span class="keyword">int</span> newValue)</span></span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">insertNode2</span><span class="params">(Node **nextp, <span class="keyword">int</span> newValue)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	srand(time(<span class="number">0</span>));</div><div class="line"></div><div class="line">	Node *head = (Node *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</div><div class="line">	head-&gt;next = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> temp = rand() % <span class="number">50</span>;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, temp);</div><div class="line">		<span class="comment">//insertNode(&amp;head,temp);</span></div><div class="line">		insertNode2(&amp;head,temp);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	Node *p = head-&gt;next;</div><div class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p-&gt;value);</div><div class="line">		p = p-&gt;next;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	getchar();</div><div class="line">	getchar();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">因为我个人没有经过正经的课堂训练，自己考研才接触编程、数据结构之类的。看了很多对自学编程提的建议都是多编写，并且要有抽象的思想，所以将这个方法写了下来，可能对很对科班出身的人不算什么问题了吧。</p>

<p style="text-align: justify;">我感觉这个抽象很好，希望是给自己编程道路的一个好的开端吧:)</p>

<p style="text-align: justify;">同时，因为我在初学时发现测试代码也会花费很多时间，所以将完成的代码都贴了上来，而不仅仅是函数，希望也能帮助到更多的想我这样的初学者吧。</p></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://skills.frankge.me/a-smart-way-to-insert-a-new-node-in-sorted-singly-linked-list/" data-id="cixsvivs2000bpgezcxev82pt" class="article-share-link">分享到</a><div class="tags"><a href="/tags/C-C/">C/C++</a></div><div class="post-nav"><a href="/the-implement-of-binary-tree-in-cpp/" class="pre">二叉树的实现以及相关操作C/C++</a><a href="/the-timeline-of-my-blog/" class="next">博客时间轴</a></div><div data-thread-key="a-smart-way-to-insert-a-new-node-in-sorted-singly-linked-list/" data-title="顺序单链表插入新节点的一种方法" data-url="http://skills.frankge.me/a-smart-way-to-insert-a-new-node-in-sorted-singly-linked-list/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="a-smart-way-to-insert-a-new-node-in-sorted-singly-linked-list/" data-title="顺序单链表插入新节点的一种方法" data-url="http://skills.frankge.me/a-smart-way-to-insert-a-new-node-in-sorted-singly-linked-list/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://skills.frankge.me"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/建站相关/">建站相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程学习/">编程学习</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-tags"> 标签</i></div><div class="tagcloud"><a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/深度学习/" style="font-size: 15px;">深度学习</a> <a href="/tags/C-C/" style="font-size: 15px;">C/C++</a> <a href="/tags/我的博客/" style="font-size: 15px;">我的博客</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://ihuafan.com/" title="Huafan's Blog" target="_blank">Huafan's Blog</a><ul></ul><a href="http://heimingx.cn/" title="Optimize Life - Heiming Xu's Blog" target="_blank">Optimize Life - Heiming Xu's Blog</a><ul></ul><a href="http://zhikaizhang.cn/" title="Zhikaizhang's Blog" target="_blank">Zhikaizhang's Blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer"> Copyright &copy; 2016-2017 <a href="http://skills.frankge.me/">Frank</a>.
 Powered by <a href="https://hexo.io">Hexo</a>.</div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'skillsfrankge'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>