
<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Frank</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Skills">
<meta property="og:type" content="website">
<meta property="og:title" content="Frank">
<meta property="og:url" content="http://skills.frankge.me/page/2/index.html">
<meta property="og:site_name" content="Frank">
<meta property="og:description" content="Skills">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Frank">
<meta name="twitter:description" content="Skills">
  
    <link rel="alternative" href="/atom.xml" title="Frank" type="application/atom+xml">
  
  
    <link href="/favicon.ico" rel="icon" type="image/x-ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]--><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>
<body>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Frank</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">去探索更大的世界</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="skills.frankge.me">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-getting-start-to-dynamic-programming-part2-some-exercises-slightly-difficult-from-lintcode-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/getting-start-to-dynamic-programming-part2-some-exercises-slightly-difficult-from-lintcode-2/" class="article-date">
  <time datetime="2016-11-15T16:44:43.000Z" itemprop="datePublished">2016-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/编程学习/">编程学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/getting-start-to-dynamic-programming-part2-some-exercises-slightly-difficult-from-lintcode-2/">浅谈动态规划（二）——进阶题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p style="text-align: justify;">上一次的动态规划的文章中（<span style="color: #0000ff;"><a href="http://frankge.me/blog/2016/10/24/getting-start-to-dynamic-programming-part1-some-exercises-from-lintcode/" target="_blank" rel="external">浅谈动态规划（一）——从lintcode刷题入门</a></span>），借助lintcode上两个简单且典型的例子（Triangle和Climbing Stairs），阐述了动态规划的两个特点：1）最优子结构，和2）子问题重叠。这回来讲讲最近做lintcode上的几个难度稍微大一些的题目。这些题目也很符合动态规划的那两个特点。</p>

<p>先来看看第一个题目。</p>
<p>1.<span style="color: #0000ff;"><a href="http://www.lintcode.com/en/problem/paint-fence/" target="_blank" rel="external">Paint Fence（栅栏染色）</a></span></p>
<p>题目描述：</p>
<p style="text-align: justify;">There is a fence with n posts, each post can be painted with one of the k colors. You have to paint all the posts such that no more than two adjacent fence posts have the same color. Return the total number of ways you can paint the fence.<br>Notice: <code>n</code> and <code>k</code> are non-negative integers.</p>

<p>例子：<br>Given <code>n=3</code>, <code>k=2</code> return <code>6</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">item</th>
<th style="text-align:center">post 1</th>
<th style="text-align:center">post 2</th>
<th style="text-align:center">post 3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">way1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">way2</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">way3</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">way4</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">way5</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">way6</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>题目中要求给<code>n</code>个栅栏涂颜色，有k种颜色可以选择，限制条件是最多可以有两个相邻的栅栏颜色相同。</p>
<p>解题思路：</p>
<p style="text-align: justify;">令<code>ways[i]( n = 1, 2, 3, ..., n )</code>表示涂到第i个栅栏时的所有的方法数。这样，题目就符合动态规划的两个特征（参考之前的那篇文章分析），就可以用动态规划求解。那么我们在涂第i个栅栏的时候，有两种涂色方式：1）和第<code>i-1</code>个栅栏的颜色相同；2）和第<code>i-1</code>个栅栏的颜色不同。在1）方式下，因为要保证最多只有两个相邻的栅栏颜色相同，所以第i个栅栏的颜色和第i-2个栅栏的颜色必然是不同的，那么此时有<code>ways[i-2] * (k-1)</code>中填涂的方式。在2）方式下，不需要考虑之前的栅栏的颜色，只要保证和<code>i-1</code>个栅栏颜色不同即可，此时有<code>ways[i-1] * (k-1）</code>种方法。所以有状态转移方程：</p>

<p><code>ways[i] = ways[i-2] * (k-1) + ways[i-1] * (k-1)</code></p>
<p style="text-align: justify;">同时发现，每次只要用到相邻的3个栅栏的方法数就可以了，这样可以减少空间的使用。所以代码为：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">numWays</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">	<span class="comment">// Write your code here</span></div><div class="line">	<span class="keyword">if</span> (n == <span class="number">0</span> || k == <span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		</div><div class="line">	<span class="keyword">if</span> (n == <span class="number">1</span>)</div><div class="line">		<span class="keyword">return</span> k;</div><div class="line">	<span class="keyword">if</span> (n == <span class="number">2</span>)</div><div class="line">		<span class="keyword">return</span> k * k;</div><div class="line">		</div><div class="line">	<span class="keyword">int</span> ways[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;; <span class="comment">// 辅助数组，只使用3个变量即可</span></div><div class="line">	ways[<span class="number">0</span>] = k;</div><div class="line">	ways[<span class="number">1</span>] = k * k;</div><div class="line">		</div><div class="line">	<span class="comment">// 动态规划步骤</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; n; i++)</div><div class="line">	&#123;</div><div class="line">		ways[<span class="number">2</span>] = (k<span class="number">-1</span>) * (ways[<span class="number">0</span>] + ways[<span class="number">1</span>]); <span class="comment">// 依据相邻的两个栅栏的填涂方法数来求解第3个栅栏的填涂方法数</span></div><div class="line">		ways[<span class="number">0</span>] = ways[<span class="number">1</span>];</div><div class="line">		ways[<span class="number">1</span>] = ways[<span class="number">2</span>];</div><div class="line">	&#125;</div><div class="line">		</div><div class="line">	<span class="keyword">return</span> ways[<span class="number">2</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">这道题虽然也是简单的，但是因为限制条件的运用比较巧妙，所以给贴出来了。接下来看看下一题。</p>

<p>2.<span style="color: #0000ff;"><a href="http://www.lintcode.com/en/problem/house-robber/" target="_blank" rel="external">House Robber（打劫房屋）</a></span></p>
<p>题目描述：</p>
<p style="text-align: justify;">You are a professional robber planning to rob houses along a street. Each house has a certain amount of money stashed, the only constraint stopping you from robbing each of them is that adjacent houses have security system connected and it will automatically contact the police if two adjacent houses were broken into on the same night.</p>

<p style="text-align: justify;">Given a list of non-negative integers representing the amount of money of each house, determine the maximum amount of money you can rob tonight without alerting the police.</p>

<p>例子：<br>Given <code>[3, 8, 4]</code>, return <code>8</code>.</p>
<p style="text-align: justify;">题目要求从<code>n</code>个房屋中找出一些房屋取走里面财产，找到财产最大的总值，限制条件是不能有相邻的房屋同时被偷盗。</p>

<p style="text-align: justify;">这道题虽然是道中等题，不过思路也很清晰，动态规划的两个特征也非常明显。令<code>money[i]( i = 1, 2, ..., n )</code>表示在偷第i个房屋时的最大值，那么在偷第i个房屋时，需要比较的只是<code>money[i-1]</code>和<code>money[i-2] + A[i]</code>值的大小(<code>A[i]</code>是第i个房屋的财产值)，因为相邻的两个房屋不可能同时被偷。所以，状态转移方程为：</p>

<p><code>money[i] = max(money[i-1], money[i-2] + A[i])</code></p>
<p style="text-align: justify;">同样，我们发现每次比较时，只需要保留最近两次的最大值即可，那么优化后的代码为：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">houseRobber</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A)</span> </span>&#123;</div><div class="line">	<span class="comment">// write your code here</span></div><div class="line">	<span class="keyword">int</span> n = A.size();</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (n == <span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">if</span> (n == <span class="number">1</span>)</div><div class="line">		<span class="keyword">return</span> A[<span class="number">0</span>];</div><div class="line">	</div><div class="line">	<span class="comment">// 辅助数组</span></div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> money[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">	money[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">	money[<span class="number">1</span>] = A[<span class="number">0</span>];</div><div class="line">	</div><div class="line">	<span class="comment">// 动态规划步骤</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</div><div class="line">	&#123;</div><div class="line">		money[<span class="number">2</span>] = max(A[i<span class="number">-1</span>] + money[<span class="number">0</span>], money[<span class="number">1</span>]);</div><div class="line">		money[<span class="number">0</span>] = money[<span class="number">1</span>];</div><div class="line">		money[<span class="number">1</span>] = money[<span class="number">2</span>];</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">return</span> money[<span class="number">2</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最后来看第3题。</p>
<p>3.<span style="color: #0000ff;"><a href="http://www.lintcode.com/en/problem/paint-house/" target="_blank" rel="external">Paint House（房屋染色）</a></span></p>
<p>题目描述：</p>
<p style="text-align: justify;">There are a row of n houses, each house can be painted with one of the three colors: <code>red</code>, <code>blue</code> or <code>green</code>. The cost of painting each house with a certain color is different. You have to paint all the houses such that no two adjacent houses have the same color.</p>

<p style="text-align: justify;">The cost of painting each house with a certain color is represented by a <code>n x 3</code> cost matrix. For example, <code>costs[0][0]</code> is the cost of painting house 0 with color red; <code>costs[1][2]</code> is the cost of painting house 1 with color green, and so on… Find the minimum cost to paint all houses.</p>

<p>Notice: All costs are positive integers.</p>
<p>例子：</p>
<p>Given <code>costs = [[14,2,11],[11,14,5],[14,3,10]]</code> return <code>10</code></p>
<p>house <code>0</code> is blue, house <code>1</code> is green, house <code>2</code> is blue, <code>2 + 5 + 3 = 10</code></p>
<p style="text-align: justify;">题目要求给n个房子粉刷颜色，找到最小的费用。粉刷时有3种颜色可供选择，而粉刷不同的颜色的费用是不同的，限制条件是相邻的两个房子的颜色不能相同。这道题目其实和上一道题目有点类似，均为相邻的两个有限制，不过这个在动态规划的时候，比较的是粉刷的不同的颜色。同样的方法，令<code>value[i][j](i = 1, 2, ..., n; j = 1, 2, 3)</code>表示正在粉刷第i个房子的时候颜色为j时的总费用（之前粉刷的位置均保证了费用最小）。为了避免相邻的两个房子粉刷的颜色相同，在粉刷每一层的时候，还要和前一层粉刷的颜色比较。那么在粉刷第i个房屋颜色为j时的状态转移方程为：</p>

<p><code>value[i][j] = min(costs[i][j] + value[i-1][k]), k = 1, 2, 3; k != j</code></p>
<p style="text-align: justify;">上式中<code>k</code>是上一层粉刷不同颜色到达最小值时的不同颜色。在粉刷时要保证相邻的两层颜色不相同，所以<code>k != j</code>。</p>

<p>有了状态转移方程，题目的代码就好写了：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">minCost2</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; &amp;costs)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> n = costs.size();</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (n == <span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">int</span> i, j, k;</div><div class="line">	<span class="keyword">int</span> temp;</div><div class="line">	<span class="keyword">int</span> minValue = INT_MAX;</div><div class="line">			</div><div class="line">	<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) </div><div class="line">            <span class="keyword">if</span> (minValue &gt; costs[<span class="number">0</span>][j])</div><div class="line">	        minValue = costs[<span class="number">0</span>][j];</div><div class="line">					   </div><div class="line">	<span class="keyword">if</span> (n == <span class="number">1</span>)</div><div class="line">		<span class="keyword">return</span> minValue;</div><div class="line"></div><div class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; value(n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">3</span>, INT_MAX)); <span class="comment">// 辅助数组，初始化时每个位置均为INT_MAX</span></div><div class="line"></div><div class="line">	<span class="comment">// 动态规划步骤</span></div><div class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (i == <span class="number">0</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</div><div class="line">				value[i][j] = costs[i][j];</div><div class="line"></div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 找出相邻两层不相同时，粉刷不同颜色的最小值</span></div><div class="line">		<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</div><div class="line">		&#123;</div><div class="line">			minValue = INT_MAX;</div><div class="line">			<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; <span class="number">3</span>; k++) <span class="comment">// 上一层粉刷不同颜色时对应的最小值</span></div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span> (k == j) <span class="comment">// 跳过相同颜色</span></div><div class="line">					<span class="keyword">continue</span>;</div><div class="line">				<span class="comment">// 找出最小值</span></div><div class="line">				temp = costs[i][j] + value[i<span class="number">-1</span>][k];</div><div class="line">				<span class="keyword">if</span> (temp &lt; minValue)</div><div class="line">					minValue = temp;</div><div class="line">			&#125;</div><div class="line">			value[i][j] = minValue;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 找出粉刷完最后一个房屋时的最小费用</span></div><div class="line">	minValue = INT_MAX;</div><div class="line">	<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) </div><div class="line">            <span class="keyword">if</span> (minValue &gt; value[n<span class="number">-1</span>][j])</div><div class="line">		minValue = value[n<span class="number">-1</span>][j];</div><div class="line"></div><div class="line">	<span class="keyword">return</span> minValue;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">同样，代码也可以优化以减少空间消耗，在这里就不再将最后结果贴出来了。</p>

<p style="text-align: justify;">好了，这就是这次的全部内容。这些题目是我在刷lintcode中遇到的动态规划特征比较明显的题目，且比《<span style="color: #0000ff;"><a href="http://frankge.me/blog/2016/10/24/getting-start-to-dynamic-programming-part1-some-exercises-from-lintcode/" target="_blank" rel="external">浅谈动态规划（一）——从lintcode刷题入门</a></span>》里面的一些题目稍微难点。希望能够给初接触动态规划的童鞋一点参考。</p>

<p>参考资料：<br>lintcode<br>1.<span style="color: #0000ff;"><a href="http://www.lintcode.com/en/problem/paint-fence/" target="_blank" rel="external">Paint Fence（栅栏染色）</a></span><br>2.<span style="color: #0000ff;"><a href="http://www.lintcode.com/en/problem/house-robber/" target="_blank" rel="external">House Robber（打劫房屋）</a></span><br>3.<span style="color: #0000ff;"><a href="http://www.lintcode.com/en/problem/paint-house/" target="_blank" rel="external">Paint House（房屋染色）</a></span></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://skills.frankge.me/getting-start-to-dynamic-programming-part2-some-exercises-slightly-difficult-from-lintcode-2/" data-id="ciwec5sr20007t4ezqsz8d24e" class="article-share-link" data-share="baidu" data-title="浅谈动态规划（二）——进阶题">Share</a>
      

      
        <a href="http://skills.frankge.me/getting-start-to-dynamic-programming-part2-some-exercises-slightly-difficult-from-lintcode-2/#ds-thread" class="article-comment-link">Comments</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-matconvnet-installation-in-windows-system" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/matconvnet-installation-in-windows-system/" class="article-date">
  <time datetime="2016-10-25T08:28:07.000Z" itemprop="datePublished">2016-10-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/编程学习/">编程学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/matconvnet-installation-in-windows-system/">windows下MatConvNet深度学习框架的搭建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><br></p>
<h3 id="16-11-29更新"><a href="#16-11-29更新" class="headerlink" title="16.11.29更新"></a>16.11.29更新</h3><p style="text-align: justify;"><br>1.添加beta23版本安装出现的问题。<br><br>最近安装beta23版本，出现<code>vl_compilenn()</code>函数运行时报错如下：</p>

<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line">错误使用 mex</div><div class="line">roipooling_cpu.cpp</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">120</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">        E:\postgraduate\project\Machine Learning\Deep</div><div class="line">        Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">324</span>): 参见对正在编</div><div class="line">        译的函数 模板 实例化“void roipooling_forward_cpu&lt;type,acc_sum&lt;type&gt;&gt;(type *,const type</div><div class="line">        *,size_t,size_t,size_t,size_t,const type *,size_t,const int [],const double [])”的引用</div><div class="line">        with</div><div class="line">        [</div><div class="line">            type=float</div><div class="line">        ]</div><div class="line">        E:\postgraduate\project\Machine Learning\Deep</div><div class="line">        Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">320</span>): 编译类 模板</div><div class="line">        成员函数“vl::ErrorCode vl::impl::roipooling_average&lt;dev,type&gt;::forward(type *,const type</div><div class="line">        *,size_t,size_t,size_t,size_t,const type *,size_t,const int [],const double [])”时</div><div class="line">        with</div><div class="line">        [</div><div class="line">            dev=VLDT_CPU,</div><div class="line">            type=float</div><div class="line">        ]</div><div class="line">        E:\postgraduate\project\Machine Learning\Deep</div><div class="line">        Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">350</span>): 参见对正在编</div><div class="line">        译的类 模板 实例化“vl::impl::roipooling_average&lt;dev,type&gt;”的引用</div><div class="line">        with</div><div class="line">        [</div><div class="line">            dev=VLDT_CPU,</div><div class="line">            type=float</div><div class="line">        ]</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">121</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">122</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">123</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">128</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">129</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">130</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">131</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">167</span>) : warning C4267:</div><div class="line">“初始化”: 从“size_t”转换到“const int”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">208</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">        E:\postgraduate\project\Machine Learning\Deep</div><div class="line">        Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">342</span>): 参见对正在编</div><div class="line">        译的函数 模板 实例化“void roipooling_backward_cpu&lt;type,acc_sum&lt;type&gt;&gt;(type *,const type</div><div class="line">        *,size_t,size_t,size_t,size_t,const type *,size_t,const type *,const int [],const double</div><div class="line">        [])”的引用</div><div class="line">        with</div><div class="line">        [</div><div class="line">            type=float</div><div class="line">        ]</div><div class="line">        E:\postgraduate\project\Machine Learning\Deep</div><div class="line">        Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">337</span>): 编译类 模板</div><div class="line">        成员函数“vl::ErrorCode vl::impl::roipooling_average&lt;dev,type&gt;::backward(type *,const type</div><div class="line">        *,size_t,size_t,size_t,size_t,const type *,size_t,const type *,const int [],const double</div><div class="line">        [])”时</div><div class="line">        with</div><div class="line">        [</div><div class="line">            dev=VLDT_CPU,</div><div class="line">            type=float</div><div class="line">        ]</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">209</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">210</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">211</span>) : warning C4244:</div><div class="line">“初始化”: 从“const double”转换到“float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">216</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">217</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">218</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">219</span>) : error C3861:</div><div class="line">“<span class="built_in">round</span>”: 找不到标识符</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">227</span>) : warning C4244:</div><div class="line">“初始化”: 从“double”转换到“const float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">228</span>) : warning C4244:</div><div class="line">“初始化”: 从“double”转换到“const float”，可能丢失数据</div><div class="line">E:\postgraduate\project\Machine Learning\Deep</div><div class="line">Learning\CNN\matconvnet<span class="number">-1.0</span>-beta23\matlab\src\bits\impl\roipooling_cpu.cpp(<span class="number">250</span>) : warning C4267:</div><div class="line">“初始化”: 从“size_t”转换到“const int”，可能丢失数据</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">出错 vl_compilenn&gt;mex_compile (line <span class="number">529</span>)</div><div class="line">mex(mopts&#123;:&#125;) ;</div><div class="line"></div><div class="line">出错 vl_compilenn (line <span class="number">490</span>)</div><div class="line">    mex_compile(opts, srcs&#123;i&#125;, objfile, flags.mexcc) ;</div><div class="line"></div><div class="line">出错 compile (line <span class="number">2</span>)</div><div class="line"></div><div class="line">vl_compilenn;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">解决方案是在<code>matconvnet-1.0-beta23\matlab\src\bits\impl</code>文件夹下的<code>roipooling_cpu.cpp</code>文件中添加如下代码：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">round</span><span class="params">(<span class="keyword">double</span> r)</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">return</span> (r &gt; <span class="number">0.0</span>) ? <span class="built_in">floor</span>(r + <span class="number">0.5</span>) : <span class="built_in">ceil</span>(r - <span class="number">0.5</span>);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">对比一下之前的cpp文件，添加后前几行代码如下：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// @author Abishek Dutta</span></div><div class="line"><span class="comment">// @author Andrea Vedaldi</span></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">Copyright (C) 2016 Hakan Bilen, Abishek Dutta, and Andrea Vedaldi.</div><div class="line">All rights reserved.</div><div class="line"></div><div class="line">This file is part of the VLFeat library and is made available under</div><div class="line">the terms of the BSD license (see the COPYING file).</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"matrix.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"../data.hpp"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"roipooling.hpp"</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::max ;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::min ;</div><div class="line"></div><div class="line"><span class="comment">/* ---------------------------------------------------------------- */</span></div><div class="line"><span class="comment">/*                                            max roipooling helper */</span></div><div class="line"><span class="comment">/* ---------------------------------------------------------------- */</span></div><div class="line"></div><div class="line"><span class="comment">/*************16.11.29添加*******************/</span></div><div class="line"><span class="comment">// @Frank</span></div><div class="line"><span class="comment">// from https://github.com/vlfeat/matconvnet/issues/722</span></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">round</span><span class="params">(<span class="keyword">double</span> r)</span></span></div><div class="line">&#123;</div><div class="line"><span class="keyword">return</span> (r &gt; <span class="number">0.0</span>) ? <span class="built_in">floor</span>(r + <span class="number">0.5</span>) : <span class="built_in">ceil</span>(r - <span class="number">0.5</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">/*************16.11.29添加*******************/</span></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> type&gt;</div><div class="line"><span class="keyword">struct</span> acc_max</div><div class="line"><span class="comment">// 以下代码省略</span></div></pre></td></tr></table></figure>
<h3 id="博客原文"><a href="#博客原文" class="headerlink" title="博客原文"></a>博客原文</h3><p style="text-align: justify;"><span style="color: #3366ff;"><a href="http://www.vlfeat.org/matconvnet/" target="_blank" rel="external">MatConvNet</a></span>是Matlab下用于机器视觉的一个工具包，主要应用是CNN网络，当然其他的网络也涉及到了。MatConvNet简洁、高效，可以用于图片分类、分割和人脸识别等等深度学习的功能。具体的可以参见官网的介绍。</p>

<p style="text-align: justify;">在搭建环境的过程中，发现如今网上对其的资源不太多，所以在这做一个总结。以beta22版本为例。</p>

<p>过程分为下面几个步骤：<br>1.MatConvNet的下载<br>2.GPU模式的使用<br>3.测试</p>
<p>1.MatConvNet的下载</p>
<p style="text-align: justify;">在其<span style="color: #3366ff;"><a href="http://www.vlfeat.org/matconvnet/" target="_blank" rel="external">官网的页面</a></span>进行下载，解压到适当的位置。</p>

<p style="text-align: justify;">运行其中<code>matconvnet-1.0-beta22\examples\vggfaces</code>路径下的<code>cnn_vgg_faces.m</code>文件，会出现下面的结果，那么说明已经可以使用了。在运行前最好把其中要下载的一些内容给放到对应的文件夹下，这样可以节省一点等待的时间。</p>

<p><img src="http://blog.frankge.me/wp-content/uploads/2016/10/matconvnet-installation-in-windows-system-01.png" alt="matconvnet-installation-in-windows-system-01"></p>
<p>2.GPU模式的使用</p>
<p style="text-align: justify;">官网的<span style="color: #3366ff;"><a href="http://www.vlfeat.org/matconvnet/install/" target="_blank" rel="external">这个页面</a></span>中，提到了搭建GPU的方式。</p>

<p style="text-align: justify;">首先，安装CUDA，在<span style="color: #3366ff;"><a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="external">这个页面</a></span>有下载。记得下载和自己系统以及显卡支持的CUDA。</p>

<p style="text-align: justify;">接下来，要下载cuDNN(The NVIDIA CUDA Deep Neural Network library)。cuDNN是用于GPU加速的一个库函数。在<span style="color: #3366ff;"><a href="https://developer.nvidia.com/cudnn" target="_blank" rel="external">这个页面</a></span>有下载。</p>

<p style="text-align: justify;">然后把解压好的<code>cuDNN</code>放在合适的文件夹下，建议在<code>MatConvNet</code>下建立<code>local</code>文件夹，同时把<code>cuDNN</code>文件夹中<code>bin</code>文件夹下的<code>cudnn64_5.dll</code>文件复制到<code>matconvnet-1.0-beta22\matlab\mex</code>文件夹下。</p>

<p style="text-align: justify;">最后，在MatConvNet文件夹下建立<code>compileGPU.m</code>文件，其中内容如下。记得把对应的路径给改成自己电脑中的路径。</p>

<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">addpath matlab;</div><div class="line"></div><div class="line"><span class="comment">%% with cudnn</span></div><div class="line">vl_compilenn(<span class="string">'enableGpu'</span>, true, ...</div><div class="line">                <span class="string">'cudaRoot'</span>, <span class="string">'C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v8.0'</span>, ...  <span class="comment">% CUDA的安装路径</span></div><div class="line">                <span class="string">'cudaMethod'</span>, <span class="string">'nvcc'</span>, <span class="string">'enableCudnn'</span>, <span class="string">'true'</span>, ...</div><div class="line">                <span class="string">'cudnnRoot'</span>, <span class="string">'E:\postgraduate\project\Machine Learning\Deep Learning\CNN\matconvnet-1.0-beta22\local\cudnn'</span>);   <span class="comment">% cuDNN的路径</span></div></pre></td></tr></table></figure>
<p style="text-align: justify;">出现下面图片中类似的结果，就代表成功了。</p>

<p><img src="http://blog.frankge.me/wp-content/uploads/2016/10/matconvnet-installation-in-windows-system-02.png" alt="matconvnet-installation-in-windows-system-02"></p>
<p>4.测试</p>
<p style="text-align: justify;">还是根据官网的<span style="color: #3366ff;"><a href="http://www.vlfeat.org/matconvnet/install/" target="_blank" rel="external">这个页面</a></span>，在命令行窗口输入<code>vl_testnn</code>命令，测试非GPU模式，会出现下面的内容。</p>

<p><img src="http://blog.frankge.me/wp-content/uploads/2016/10/matconvnet-installation-in-windows-system-03.png" alt="matconvnet-installation-in-windows-system-03"></p>
<p style="text-align: justify;">接下来测试GPU模式，在命令行窗口输入<code>vl_testnn(&#39;gpu&#39;, true)</code>，会有类似上面的内容出现。这就是成功了，GPU模式下的速度提示还是很明显的，一般都会有十倍以上。</p>

<p><img src="http://blog.frankge.me/wp-content/uploads/2016/10/matconvnet-installation-in-windows-system-05.png" alt="matconvnet-installation-in-windows-system-05"></p>
<p>到此，MatConvNet的安装就结束了。</p>
<p style="text-align: justify;">同时，把我在安装过程中遇到的一个问题的解决方式给写一下。在安装cuDNN的时候，可能会遇到如下的错<code>Error using mex nvcc fatal : Unsupported gpu architecture &#39;compute_21&#39;</code>，其中21可以为其他不能被10整除的数字。这个时候可以把<code>matconvnet-1.0-beta22\matlab</code>下的<code>vl_compilenn.m</code>文件中的732行的代码中”%s”改为向下取10的整数倍。</p>

<p>比如，原代码为</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cudaArch = ...</div><div class="line">    sprintf(<span class="string">'-gencode=arch=compute_%s,code=\\\&amp;amp;quot;sm_%s,compute_%s\\\&amp;amp;quot; '</span>, ...</div><div class="line">            arch_code, arch_code, arch_code) ;</div></pre></td></tr></table></figure>
<p>可以改为</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cudaArch = ...</div><div class="line">    sprintf(<span class="string">'-gencode=arch=compute_20,code=\\\&amp;amp;quot;sm_20,compute_20\\\&amp;amp;quot; '</span>, ... </div><div class="line">            arch_code, arch_code, arch_code) ;</div></pre></td></tr></table></figure>
<p>这样，经常遇到的问题就能解决了。</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://skills.frankge.me/matconvnet-installation-in-windows-system/" data-id="ciwec5sr10006t4ez4q5momzm" class="article-share-link" data-share="baidu" data-title="windows下MatConvNet深度学习框架的搭建">Share</a>
      

      
        <a href="http://skills.frankge.me/matconvnet-installation-in-windows-system/#ds-thread" class="article-comment-link">Comments</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/深度学习/">深度学习</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-getting-start-to-dynamic-programming-part1-some-exercises-from-lintcode" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/getting-start-to-dynamic-programming-part1-some-exercises-from-lintcode/" class="article-date">
  <time datetime="2016-10-24T13:10:34.000Z" itemprop="datePublished">2016-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/编程学习/">编程学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/getting-start-to-dynamic-programming-part1-some-exercises-from-lintcode/">浅谈动态规划（一）——从lintcode刷题入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p style="text-align: justify;">动态规划是算法中比较常见的一种分析问题的方式，最近看算法看到这，带着lintcode上面的题目，在这写个总结。</p>

<p style="text-align: justify;">首先从一个lintcode上面简单的题目开始。</p>

<p><span style="color: #3366ff;"><a href="http://www.lintcode.com/zh-cn/problem/climbing-stairs/" target="_blank" rel="external">Climbing Stairs（爬楼梯）</a></span></p>
<p>题目描述：</p>
<p style="text-align: justify;">假设你正在爬楼梯，需要<code>n</code>步你才能到达顶部。但每次你只能爬一步或者两步，你能有多少种不同的方法爬到楼顶部？</p>

<p style="text-align: justify;">样例：<br><br>比如<code>n=3</code>，<code>1+1+1=1+2=2+1=3</code>，共有<code>3</code>中不同的方法，所以返回<code>3</code>。</p>

<p>这是一道非常具有代表性的动态规划的一道问题。</p>
<p style="text-align: justify;">令<code>f[n]</code>记录到达第<code>n</code>阶台阶的方法数。假设你还有最后一步就能到达第n阶台阶，那么最后一步，你可以选择两种方式：1）踏一步以及，2）踏两步。如果是踏一步，那么你要从第n-1阶台阶踏出，此时的方法数是 <code>f[n-1]</code>；如果是踏两步，那么你要从第n-2阶台阶出发，此时的方法数是f[n-2]。所以爬到第n级台阶的方法总数有<code>f[n] = f[n-1] + f[n-2]</code>种。状态转移方程：</p>

<p><code>f[n] = f[n-1] + f[n-2]</code></p>
<p>这样可以写出解答的递归形式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">	<span class="comment">// write your code here</span></div><div class="line">	<span class="keyword">if</span> (n &lt;= <span class="number">1</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">else</span> </div><div class="line">		<span class="keyword">return</span> climbStairs(n<span class="number">-1</span>) + climbStairs(n<span class="number">-2</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">此时我们发现可以用一个一维数组来记录之前出现的结果，这样可以省去递归中不必要的空间开销：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">	<span class="comment">// write your code here</span></div><div class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; f(n+<span class="number">1</span>);</div><div class="line"></div><div class="line">	f[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	f[<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</div><div class="line">		f[i] = f[i<span class="number">-1</span>] + f[i<span class="number">-2</span>];</div><div class="line"></div><div class="line">	<span class="keyword">return</span> f[n];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">其实，这个还可以进一步优化，因为每一步都只需要前两个台阶的结果，所以可以用两个变量来代替一维数组。</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">	<span class="comment">// write your code here</span></div><div class="line">	<span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">int</span> ways1 = <span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> ways2 = <span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> ways = <span class="number">0</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">int</span> i = <span class="number">2</span>;</div><div class="line">	<span class="keyword">while</span> (i &lt;= n)</div><div class="line">	&#123;</div><div class="line">		ways = ways1 + ways2;</div><div class="line">		</div><div class="line">		ways1 = ways2;</div><div class="line">		ways2 = ways;</div><div class="line">		</div><div class="line">		i++;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">return</span> ways;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接下来，我们再来看一题。</p>
<p><span style="color: #3366ff;"><a href="http://www.lintcode.com/zh-cn/problem/triangle/" target="_blank" rel="external">Triangle（数字三角形）</a></span></p>
<p>题目描述：</p>
<p style="text-align: justify;">给定一个数字三角形，找到从顶部到底部的最小路径和。每一步可以移动到下面一行的相邻数字上。</p>

<p>样例<br>比如，给出下列数字三角形：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">     [<span class="number">2</span>],</div><div class="line">    [<span class="number">3</span>,<span class="number">4</span>],</div><div class="line">   [<span class="number">6</span>,<span class="number">5</span>,<span class="number">7</span>],</div><div class="line">  [<span class="number">4</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">3</span>]</div><div class="line">]</div></pre></td></tr></table></figure>
<p>从顶到底部的最小路径和为<code>11</code> <code>( 2 + 3 + 5 + 1 = 11)</code>。</p>
<p style="text-align: justify;">分析问题，我们发现可以用二维数组来计算到最底层每个位置的最小路径和，令第i层下标为j的位置上最小路径和为<code>f[i][j]</code>。那么，第i层下标为<code>j</code>位置的值<code>f[i][j]</code>，只和<code>i-1</code>层位置<code>j-1</code>下标的最小路径和<code>f[i-1][j-1]</code>以及j位置的最小路径和<code>f[i-1][j]</code>有关。即，<code>f[i][j] = min(f[i-1][j-1],  f[i-1][j])</code>。所以状态转移方程为：</p>

<p><code>f[i][j] = min(f[i-1][j-1],  f[i-1][j])</code></p>
<p style="text-align: justify;">同时，发现每次的结果只与上面一层的结果有关，所以省去二维数组，只用一维数组作为辅助。代码为：</p>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">minimumTotal</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; &amp;triangle)</span> </span>&#123;</div><div class="line">	<span class="comment">// write your code here</span></div><div class="line">	<span class="keyword">if</span> (triangle.size() == <span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		</div><div class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; f(triangle[triangle.size() - <span class="number">1</span>].size());</div><div class="line">	</div><div class="line">	<span class="comment">// 动态规划过程</span></div><div class="line">	f[<span class="number">0</span>] = triangle[<span class="number">0</span>][<span class="number">0</span>];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; triangle.size(); i++) </div><div class="line">        &#123; </div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = triangle.size()<span class="number">-1</span>; j &gt;= <span class="number">0</span>; j--)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (j == <span class="number">0</span>)</div><div class="line">				f[j] = f[j] + triangle[i][j];</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (j == triangle[i].size()<span class="number">-1</span>)</div><div class="line">				f[j] = f[j<span class="number">-1</span>] + triangle[i][j];</div><div class="line">			<span class="keyword">else</span></div><div class="line">				f[j] = min(f[j<span class="number">-1</span>], f[j]) + triangle[i][j];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// 从辅助数组中找出最小值</span></div><div class="line">	<span class="keyword">int</span> result;</div><div class="line">	result = f[<span class="number">0</span>];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; f.size(); i++)</div><div class="line">		result = min(result, f[i]);</div><div class="line">		</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p style="text-align: justify;">分析这两道题目，发现它们有两个共同的特征：<br><br>1.最优子结构：一个问题的最优解包含其子问题的最优解。<br><br>2.子问题重叠：一个问题的子问题都是相同的。那么这些子问题可以用同样的方式解决，每次将解决的子问题给记录到表中，在计算之后的问题时查找前面的结果来计算当前问题。这也就是“动态规划”名称的由来了。</p>

<p style="text-align: justify;">在climbing stairs问题中，到达每个位置的方法个数，和之前的所有方法是相关联的。即，到达第n阶台阶的所有的方法个数，同时需要找出第n-1阶台阶的所有的方法以及第n-2阶台阶的所有的方法，以此类推。如果之前的问题找出的不是所有的方法数，那么第n阶台阶找出的结果也不是所有的方法数目。而且，第n阶台阶的求解方式和之前的台阶的求解方式是相同的。</p>

<p style="text-align: justify;">在triangle问题中，每个位置的最小路径和需要知道前一层此位置和下一个位置的最小路径和，如果前一层的结果不是最小路径和，那么此层求出的就不是最小路径和。同样，每层问题的求解方式和之前层问题的求解方式是相同的。</p>

<p>所以，这也就是《算法导论》一书中表述的动态规划的两个特征：<br><br>1.最优子结构<br><br>2.子问题重叠</p>
<p>参考资料：</p>
<p>1.lintcode<br><span style="color: #3366ff;"><a href="http://www.lintcode.com/en/problem/triangle/" target="_blank" rel="external">Triangle</a></span><br><span style="color: #3366ff;"><a href="http://www.lintcode.com/en/problem/climbing-stairs/" target="_blank" rel="external">Climbing Stairs</a></span></p>
<p>2.《算法导论（第三版）》。<br>第15章动态规划</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://skills.frankge.me/getting-start-to-dynamic-programming-part1-some-exercises-from-lintcode/" data-id="ciwec5sqz0005t4ezm6qlc0j2" class="article-share-link" data-share="baidu" data-title="浅谈动态规划（一）——从lintcode刷题入门">Share</a>
      

      
        <a href="http://skills.frankge.me/getting-start-to-dynamic-programming-part1-some-exercises-from-lintcode/#ds-thread" class="article-comment-link">Comments</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/建站相关/">建站相关</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程学习/">编程学习</a><span class="category-list-count">7</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-C/">C/C++</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/我的博客/">我的博客</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深度学习/">深度学习</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://ihuafan.com/" target="_blank">Huafan&#39;s Blog</a>
          </li>
        
          <li>
            <a href="http://heimingx.cn/" target="_blank">Optimize Life - Heiming Xu&#39;s Blog</a>
          </li>
        
          <li>
            <a href="http://zhikaizhang.cn/" target="_blank">Zhikaizhang&#39;s Blog</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Frank. All rights reserved.<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>.
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="totop"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>

</div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
